<view class="container">
  <!-- Upload Section -->
  <view wx:if="{{!result}}" class="upload-section">
    <view class="upload-icon">ğŸ“„</view>
    <view class="upload-title">ä¸Šä¼ æ ‡ä¹¦æ–‡ä»¶</view>
    <view class="upload-desc">æ”¯æŒ PDFã€Wordã€TXT æ ¼å¼</view>
    
    <button 
      wx:if="{{!analyzing}}" 
      class="upload-btn" 
      bindtap="chooseFile"
    >
      é€‰æ‹©æ–‡ä»¶
    </button>
    
    <view wx:else class="analyzing">
      <view class="loading-spinner"></view>
      <view class="analyzing-text">æ­£åœ¨åˆ†ææ ‡ä¹¦...</view>
      <view class="analyzing-desc">AI æ­£åœ¨æå–å…³é”®ä¿¡æ¯ï¼Œè¯·ç¨å€™</view>
    </view>
  </view>

  <!-- Result Section -->
  <view wx:else class="result-section">
    <!-- Requirements -->
    <view class="section-title">éœ€æ±‚åŒ¹é…</view>
    
    <!-- Case Requirements -->
    <view class="card">
      <view class="card-header">
        <text>ğŸ“‹ æ¡ˆä¾‹è¦æ±‚</text>
        <text class="count">{{caseRequirements.length}}</text>
      </view>
      <view class="requirements">
        <view 
          wx:for="{{caseRequirements}}" 
          wx:key="index"
          class="requirement-item"
        >
          <view class="requirement-header">
            <text class="requirement-desc">{{item.description}}</text>
            <text class="tag {{item.statusClass}}">{{item.statusText}}</text>
          </view>
          <view wx:if="{{item.evidence}}" class="requirement-evidence">è¯æ˜: {{item.evidence}}</view>
          <view wx:if="{{item.score_contribution > 0}}" class="requirement-score">åˆ†å€¼: {{item.score_contribution}}</view>
        </view>
        <view wx:if="{{caseRequirements.length === 0}}" class="empty-requirements">
          æœªæå–åˆ°ç›¸å…³è¦æ±‚
        </view>
      </view>
    </view>

    <!-- Qualification Requirements -->
    <view class="card">
      <view class="card-header">
        <text>ğŸ† èµ„è´¨è¦æ±‚</text>
        <text class="count">{{qualificationRequirements.length}}</text>
      </view>
      <view class="requirements">
        <view 
          wx:for="{{qualificationRequirements}}" 
          wx:key="index"
          class="requirement-item"
        >
          <view class="requirement-header">
            <text class="requirement-desc">{{item.description}}</text>
            <text class="tag {{item.statusClass}}">{{item.statusText}}</text>
          </view>
          <view wx:if="{{item.evidence}}" class="requirement-evidence">è¯æ˜: {{item.evidence}}</view>
          <view wx:if="{{item.score_contribution > 0}}" class="requirement-score">åˆ†å€¼: {{item.score_contribution}}</view>
        </view>
        <view wx:if="{{qualificationRequirements.length === 0}}" class="empty-requirements">
          æœªæå–åˆ°ç›¸å…³è¦æ±‚
        </view>
      </view>
    </view>

    <!-- Personnel Requirements -->
    <view class="card">
      <view class="card-header">
        <text>ğŸ‘¥ äººå‘˜è¦æ±‚</text>
        <text class="count">{{personnelRequirements.length}}</text>
      </view>
      <view class="requirements">
        <view 
          wx:for="{{personnelRequirements}}" 
          wx:key="index"
          class="requirement-item"
        >
          <view class="requirement-header">
            <text class="requirement-desc">{{item.description}}</text>
            <text class="tag {{item.statusClass}}">{{item.statusText}}</text>
          </view>
          <view wx:if="{{item.evidence}}" class="requirement-evidence">è¯æ˜: {{item.evidence}}</view>
          <view wx:if="{{item.score_contribution > 0}}" class="requirement-score">åˆ†å€¼: {{item.score_contribution}}</view>
        </view>
        <view wx:if="{{personnelRequirements.length === 0}}" class="empty-requirements">
          æœªæå–åˆ°ç›¸å…³è¦æ±‚
        </view>
      </view>
    </view>

    <!-- AI Insights -->
    <view class="section-title">AI åˆ†æ</view>
    
    <view class="card">
      <view class="card-header">ğŸ“Š é¢„ä¼°å¾—åˆ†</view>
      <view class="score-estimate">
        {{result.has_scoring_standard ? result.total_score_estimate + ' åˆ†' : 'æœªæ˜ç¡®è¯„åˆ†æ ‡å‡†'}}
      </view>
    </view>

    <view class="card">
      <view class="card-header">âš ï¸ åºŸæ ‡é£é™©</view>
      <view class="insights">
        <view wx:for="{{result.disqualifiers}}" wx:key="index" class="insight-item">â€¢ {{item}}</view>
        <view wx:if="{{!result.disqualifiers || result.disqualifiers.length === 0}}" class="empty-insights">
          æ— æ˜æ˜¾åºŸæ ‡é¡¹
        </view>
      </view>
    </view>

    <view class="card">
      <view class="card-header">ğŸ’¡ å»ºè®®</view>
      <view class="insights">
        <view wx:for="{{result.suggestions}}" wx:key="index" class="insight-item">â€¢ {{item}}</view>
        <view wx:if="{{!result.suggestions || result.suggestions.length === 0}}" class="empty-insights">
          æš‚æ— å»ºè®®
        </view>
      </view>
    </view>

    <!-- Reset Button -->
    <button class="reset-btn" bindtap="reset">é‡æ–°åˆ†æ</button>
  </view>
</view>
